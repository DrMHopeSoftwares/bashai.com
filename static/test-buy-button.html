<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Buy Button - BhashAI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-2xl font-bold text-center mb-6">
            <i class="fas fa-shopping-cart text-blue-600 mr-2"></i>
            Test Buy Number Button
        </h1>
        
        <!-- Test Phone Number -->
        <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 mb-6">
            <div class="flex items-center justify-between">
                <div>
                    <h3 class="text-lg font-semibold text-gray-800">
                        <i class="fas fa-phone text-green-600 mr-2"></i>
                        +918035315328
                    </h3>
                    <p class="text-sm text-gray-600">Test Phone Number</p>
                </div>
                <div class="text-right">
                    <div class="text-2xl font-bold text-green-600">‚Çπ1,000</div>
                    <button onclick="testBuyNumber()" 
                            class="bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg mt-2">
                        <i class="fas fa-shopping-cart mr-2"></i>
                        Buy Number
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div id="testResults" class="bg-gray-50 rounded-lg p-4 mb-6">
            <h4 class="font-semibold text-gray-800 mb-2">Test Results:</h4>
            <div id="results" class="text-sm text-gray-600">
                Click "Buy Number" to test the functionality...
            </div>
        </div>
        
        <!-- Debug Info -->
        <div class="bg-blue-50 rounded-lg p-4">
            <h4 class="font-semibold text-blue-800 mb-2">Debug Information:</h4>
            <div class="text-sm text-blue-700 space-y-1">
                <div>‚úÖ Razorpay Script: <span id="razorpayStatus">Checking...</span></div>
                <div>‚úÖ Function Defined: <span id="functionStatus">Checking...</span></div>
                <div>‚úÖ Console Logs: <span id="consoleStatus">Check browser console</span></div>
            </div>
        </div>
    </div>

    <script>
        // Test Buy Number function
        function testBuyNumber() {
            console.log('üõí Test Buy Number clicked!');
            updateResults('üõí Buy Number function called');
            
            try {
                // Show confirmation dialog
                const confirmed = confirm('Buy +918035315328 for ‚Çπ1000?\n\nThis will open Razorpay test checkout.');
                if (!confirmed) {
                    updateResults('‚ùå Purchase cancelled by user');
                    return;
                }

                updateResults('‚úÖ User confirmed purchase');

                // Razorpay configuration
                const options = {
                    key: 'rzp_live_tazOQ9eRwtLcPr',
                    amount: 100000, // ‚Çπ1000 in paise
                    currency: 'INR',
                    name: 'BhashAI',
                    description: 'Purchase Phone Number: +918035315328',
                    order_id: 'order_test_' + Date.now(),
                    prefill: {
                        name: 'Test User',
                        email: 'test@bashai.com',
                        contact: '+918035315328'
                    },
                    notes: {
                        phone_number: '+918035315328',
                        number_id: 'test_123',
                        user_id: 'test_user'
                    },
                    theme: {
                        color: '#3B82F6'
                    },
                    handler: function (response) {
                        // Payment successful
                        console.log('üí≥ Payment successful:', response);
                        updateResults('üéâ Payment successful! Payment ID: ' + response.razorpay_payment_id);
                    },
                    modal: {
                        ondismiss: function() {
                            console.log('‚ö†Ô∏è Payment cancelled');
                            updateResults('‚ö†Ô∏è Payment cancelled by user');
                        }
                    }
                };

                console.log('üí≥ Razorpay options:', options);
                updateResults('üí≥ Opening Razorpay checkout...');

                // Check if Razorpay is loaded
                if (typeof Razorpay === 'undefined') {
                    throw new Error('Razorpay library not loaded');
                }

                // Initialize Razorpay
                const rzp = new Razorpay(options);
                rzp.open();
                
                updateResults('‚úÖ Razorpay checkout opened successfully');

            } catch (error) {
                console.error('‚ùå Error:', error);
                updateResults('‚ùå Error: ' + error.message);
            }
        }
        
        // Update test results
        function updateResults(message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            results.scrollTop = results.scrollHeight;
        }
        
        // Check debug status
        function checkDebugStatus() {
            // Check Razorpay
            const razorpayStatus = document.getElementById('razorpayStatus');
            if (typeof Razorpay !== 'undefined') {
                razorpayStatus.textContent = 'Loaded ‚úÖ';
                razorpayStatus.className = 'text-green-600 font-semibold';
            } else {
                razorpayStatus.textContent = 'Not Loaded ‚ùå';
                razorpayStatus.className = 'text-red-600 font-semibold';
            }
            
            // Check function
            const functionStatus = document.getElementById('functionStatus');
            if (typeof testBuyNumber === 'function') {
                functionStatus.textContent = 'Available ‚úÖ';
                functionStatus.className = 'text-green-600 font-semibold';
            } else {
                functionStatus.textContent = 'Not Found ‚ùå';
                functionStatus.className = 'text-red-600 font-semibold';
            }
        }
        
        // Run checks when page loads
        window.onload = function() {
            setTimeout(checkDebugStatus, 1000);
            updateResults('üöÄ Test page loaded successfully');
        };
    </script>
</body>
</html>
